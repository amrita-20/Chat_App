{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://project2/./src/chatView.js","webpack://project2/./src/constants.js","webpack://project2/./src/listeners.js","webpack://project2/./src/loginView.js","webpack://project2/./src/mainView.js","webpack://project2/./src/service.js","webpack://project2/./src/state.js","webpack://project2/webpack/bootstrap","webpack://project2/webpack/runtime/define property getters","webpack://project2/webpack/runtime/hasOwnProperty shorthand","webpack://project2/webpack/runtime/make namespace object","webpack://project2/./src/controller.js"],"sourcesContent":["export function chatView(state) {\r\n  return `\r\n    <div class=\"wrapper\">\r\n    <div class=\"sidebar\">\r\n        <div class=\"capitalize\">\r\n          <img class=\"avatar\" alt=\"avatar\" src=\"/assets/avatar.jpg\" />\r\n          ${state.username}\r\n        </div>\r\n        <h1 class=\"title\">ChatHub</h1>\r\n        <button type=\"button\" class=\"button logout-button\">Logout</button>\r\n    </div>\r\n    <div class=\"chat-container\">\r\n      ${chatContainer(state)}\r\n      </div>\r\n      <div class=\"outgoing\">\r\n        ${getInputForm()}\r\n      </div>\r\n    </div>\r\n      `;\r\n}\r\n\r\nexport function chatContainer(state) {\r\n  return `\r\n  <div class=\"users-container\">\r\n  ${getUserList(state)}\r\n  </div>\r\n  <div class=\"chat-window\">\r\n  ${getMessages(state)}\r\n  </div>`;\r\n}\r\n\r\nfunction getUserList(state) {\r\n  if (state.users.length > 0) {\r\n    return (\r\n      `<ul class=\"users\">` +\r\n      state.users\r\n        .map((user) => {\r\n          return `<li class=\"user-list capitalize\">\r\n        <img class=\"avatar\" alt=\"avatar\" src=\"/assets/avatar.jpg\" />\r\n        ${user}\r\n      </li>`;\r\n        })\r\n        .join(\"\") +\r\n      `</ul>`\r\n    );\r\n  }\r\n  return `No one is online`;\r\n}\r\n\r\nfunction getMessages(state) {\r\n  if (Object.keys(state.chats).length > 0) {\r\n    return (\r\n      `<ol class=\"messages\">` +\r\n      state.chats\r\n        .map((chat) => {\r\n          return `<li class=\"message-list\">\r\n      <div class=\"message-sender\">\r\n        <div class=\"sender-info\">\r\n          <img class=\"avatar\" alt=\"avatar\" src=\"/assets/avatar.jpg\" />\r\n          <span class=\"capitalize\">${chat.username}</span>\r\n          <span class=\"timestamp\"> ${chat.timeStamp} </span>\r\n        </div>\r\n        <p class=\"message-text\">${chat.message}</p>\r\n      </div>\r\n    </li>`;\r\n        })\r\n        .join(\"\") +\r\n      `</ol>`\r\n    );\r\n  }\r\n  return `Chat window is empty start a converstation`;\r\n}\r\n\r\nexport function getInputForm() {\r\n  return `\r\n  <form class=\"outgoing-form\">\r\n    <input\r\n      class=\"to-send\"\r\n      value=\"\"\r\n      name=\"message\"\r\n      placeholder=\"Enter message to send\"\r\n    />\r\n    <button class=\"send\" type=\"submit\">Send</button>\r\n  </form>`;\r\n}\r\n","export const SERVER = {\r\n    AUTH_MISSING: 'auth-missing',\r\n    AUTH_INSUFFICIENT: 'auth-insufficient',\r\n    REQUIRED_USERNAME: 'required-username',\r\n    INVALID_USERNAME: 'invalid-username',\r\n}\r\n\r\nexport const CLIENT = {\r\n    NETWORK_ERROR: 'network-error',\r\n    NO_SESSION: 'no-session',\r\n}\r\n\r\nexport const MESSAGES = {\r\n    [CLIENT.NETWORK_ERROR]: 'Trouble connecting to the network.  Please try again',\r\n    [SERVER.AUTH_INSUFFICIENT]: 'Your username/password combination does not match any records, please try again.',\r\n    [SERVER.REQUIRED_USERNAME]: 'Username is required, please enter',\r\n    [SERVER.INVALID_USERNAME]: 'Please enter a valid username, it should contain only letters or numbers',\r\n    default: 'Something went wrong.  Please try again',\r\n  };\r\n  ","import { render, updateChatWindow } from \"./mainView\";\r\nimport {\r\n  setError,\r\n  setSpinner,\r\n  login,\r\n  logout,\r\n  setUserDetails,\r\n  addChats,\r\n  resetSpinner,\r\n} from \"./state\";\r\nimport {\r\n  fetchLogin,\r\n  fetchLogout,\r\n  sendMessage,\r\n  fetchUserDetails,\r\n} from \"./service\";\r\nimport { CLIENT, SERVER } from \"./constants\";\r\n\r\nexport function addListenerOnLogin(state, rootEl) {\r\n  rootEl.addEventListener(\"click\", (event) => {\r\n    if (event.target.classList.contains(\"login-button\")) {\r\n      const username = rootEl.querySelector(\"#username\").value;\r\n      setSpinner();\r\n      rootEl.classList.add(\"blur\");\r\n      render(state, rootEl);\r\n      fetchLogin({ username })\r\n        .then((session) => {\r\n          login(session.username);\r\n          setSpinner();\r\n          render(state, rootEl);\r\n          return fetchUserDetails();\r\n        })\r\n        .catch((err) => {\r\n            resetSpinner();\r\n            rootEl.classList.remove(\"blur\");\r\n            render(state, rootEl);\r\n            if (err?.error === SERVER.AUTH_MISSING) {\r\n              return Promise.reject({ error: CLIENT.NO_SESSION });\r\n            }\r\n            return Promise.reject(err);\r\n        })\r\n        .then((userDetails) => {\r\n          setUserDetails(userDetails);\r\n          rootEl.classList.remove(\"blur\");\r\n          render(state, rootEl);\r\n        })\r\n        .catch((err) => {\r\n          resetSpinner();\r\n          rootEl.classList.remove(\"blur\");\r\n          if (err?.error == CLIENT.NO_SESSION) {\r\n            logout();\r\n            render(state, rootEl);\r\n            return;\r\n          }\r\n          setError(err?.error || \"ERROR\");\r\n          render(state, rootEl);\r\n        });\r\n    }\r\n  });\r\n}\r\n\r\nexport function addListenerOnLogout(state, rootEl) {\r\n  rootEl.addEventListener(\"click\", (event) => {\r\n    if (event.target.classList.contains(\"logout-button\")) {\r\n      setSpinner();\r\n      rootEl.classList.add(\"blur\");\r\n      render(state, rootEl);\r\n      fetchLogout()\r\n        .then(() => {\r\n          logout();\r\n          rootEl.classList.remove(\"blur\");\r\n          render(state, rootEl);\r\n        })\r\n        .catch((err) => {\r\n          setError(err?.error || \"ERROR\");\r\n          rootEl.classList.remove(\"blur\");\r\n          render(state, rootEl);\r\n        });\r\n    }\r\n  });\r\n}\r\n\r\nfunction getCurrentTimestamp() {\r\n  const now = new Date();\r\n  const options = {\r\n    year: \"numeric\",\r\n    month: \"numeric\",\r\n    day: \"numeric\",\r\n    hour: \"numeric\",\r\n    minute: \"numeric\",\r\n  };\r\n  return now.toLocaleString(undefined, options);\r\n}\r\n\r\nexport function addListenerOnSend(state, rootEl) {\r\n  rootEl.addEventListener(\"submit\", (event) => {\r\n    //event.preventDefault();\r\n    if (event.target.classList.contains(\"outgoing-form\")) {\r\n      const message = rootEl.querySelector(\".to-send\").value;\r\n      const timeStamp = getCurrentTimestamp();\r\n      render(state, rootEl);\r\n      sendMessage({ message, timeStamp })\r\n        .then((chats) => {\r\n          addChats(chats);\r\n          rootEl.querySelector(\".to-send\").focus();\r\n          updateChatWindow(state, rootEl);\r\n        })\r\n        .catch((err) => {\r\n          if (err?.error === SERVER.AUTH_MISSING) {\r\n            logout();\r\n          } else {\r\n            setError(err?.error || \"ERROR\");\r\n          }\r\n          render(state, rootEl);\r\n        });\r\n    }\r\n  });\r\n}\r\n","function loginView(state) {\r\n  return ` <div class=\"login\">\r\n    <div class=\"form-container\">\r\n        <form class=\"login-form\">\r\n            <div class=\"form-group\">\r\n                <label class=\"label\" for=\"username\">Username</label>\r\n                <input class=\"input\" type=\"text\" name=\"username\" id=\"username\">\r\n            </div>\r\n            <button class=\"button login-button\" type=\"button\">Submit</button>\r\n        </form>\r\n    </div>\r\n</div>`;\r\n}\r\n\r\nexport default loginView;\r\n","import loginView from \"./loginView\";\r\nimport { chatView, chatContainer } from \"./chatView\";\r\n\r\nexport function render(state, rootEl) {\r\n  let view = loginView(state);\r\n  if (state.isLoggedIn) {\r\n    view = chatView(state);\r\n  }\r\n  const html = `<main class=\"main\">\r\n    ${getSpinner(state)}\r\n    ${generateErrorView(state)}\r\n    ${view}\r\n    </main>`;\r\n  rootEl.innerHTML = html;\r\n}\r\n\r\nexport function updateChatWindow(state, rootEl) {\r\n  const chatContainerElement = rootEl.querySelector(\".chat-container\");\r\n  if (chatContainerElement) {\r\n    chatContainerElement.innerHTML = chatContainer(state);\r\n  }\r\n}\r\n\r\nfunction generateErrorView(state) {\r\n    if(state.error) {\r\n        return `\r\n        <div class=\"status\">${state.error}</div>\r\n    `;\r\n    }\r\n    return ``;\r\n}\r\n\r\nfunction getSpinner(state) {\r\n  if (state.isLoading) {\r\n    return `<div class=\"spinner-container\">\r\n            <div class=\"spinner\"></div>\r\n        </div>`;\r\n  }\r\n  return ``;\r\n}\r\n","export function fetchSession() {\r\n  return makeServiceCallWithoutHeaders(\"/api/v1/session/\", \"GET\");\r\n}\r\n\r\nexport function fetchLogin(username) {\r\n  return makeServiceCallWithHeaders(\"/api/v1/session/\", \"POST\", username);\r\n}\r\n\r\nexport function fetchLogout() {\r\n  return makeServiceCallWithoutHeaders(\"/api/v1/session/\", \"DELETE\");\r\n}\r\n\r\nexport function fetchUserDetails() {\r\n  return makeServiceCallWithoutHeaders(\"/api/v1/user/details/\", \"GET\");\r\n}\r\n\r\nexport function sendMessage(message) {\r\n  return makeServiceCallWithHeaders(\"/api/v1/user/chats/\", \"POST\", message);\r\n}\r\n\r\nfunction makeServiceCallWithHeaders(url, methodType, request) {\r\n  return fetch(url, {\r\n    method: methodType,\r\n    headers: {\r\n      \"content-type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(request),\r\n  })\r\n    .catch(() => Promise.reject({ error: \"network-error\" }))\r\n    .then((response) => {\r\n      if (!response.ok) {\r\n        return response.json().then((error) => Promise.reject(error));\r\n      }\r\n      return response.json();\r\n    });\r\n}\r\n\r\nfunction makeServiceCallWithoutHeaders(url, methodType) {\r\n  return fetch(url, {\r\n    method: methodType,\r\n  })\r\n    .catch(() => Promise.reject({ error: \"network-error\" }))\r\n    .then((response) => {\r\n      if (!response.ok) {\r\n        return response.json().then((error) => Promise.reject(error));\r\n      }\r\n      return response.json();\r\n    });\r\n}\r\n","import { MESSAGES } from \"./constants\";\r\n\r\nconst state = {\r\n  isLoggedIn: false,\r\n  isLoading: true,\r\n  username: \"\",\r\n  error: \"\",\r\n  chats: {},\r\n  users: [],\r\n};\r\n\r\nexport function setSpinner() {\r\n  state.isLoading = true;\r\n  state.error = \"\";\r\n}\r\n\r\nexport function resetSpinner() {\r\n  state.isLoading = false;\r\n}\r\n\r\nexport function login(username) {\r\n  state.isLoggedIn = true;\r\n  state.isLoading = false;\r\n  state.username = username;\r\n  state.error = \"\";\r\n}\r\n\r\nexport function logout() {\r\n  state.isLoggedIn = false;\r\n  state.isLoading = false;\r\n  state.username = \"\";\r\n  state.error = \"\";\r\n}\r\n\r\nexport function setError(error) {\r\n  if (!error) {\r\n    state.error = \"\";\r\n    return;\r\n  }\r\n  state.isLoading = false;\r\n  state.error = MESSAGES[error] || MESSAGES.default;\r\n}\r\n\r\nexport function setUserDetails(userDetails) {\r\n  state.chats = userDetails?.chats || {};\r\n  state.isLoading = false;\r\n  state.error = \"\";\r\n  state.users = userDetails?.users || [];\r\n}\r\n\r\nexport function addChats(chats) {\r\n  state.chats = chats || {};\r\n  state.isLoading = false;\r\n  state.error = \"\";\r\n}\r\n\r\nexport default state;\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { fetchSession, fetchUserDetails } from \"./service\";\r\nimport state, {\r\n  login,\r\n  logout,\r\n  resetSpinner,\r\n  setUserDetails,\r\n  setError,\r\n  setSpinner,\r\n} from \"./state\";\r\nimport { render, updateChatWindow } from \"./mainView\";\r\nimport {\r\n  addListenerOnLogin,\r\n  addListenerOnLogout,\r\n  addListenerOnSend,\r\n} from \"./listeners\";\r\nimport { CLIENT, SERVER } from \"./constants\";\r\n\r\nconst rootEl = document.querySelector(\"#app\");\r\n\r\nconst init = () => {\r\n  setSpinner();\r\n  rootEl.classList.add(\"blur\");\r\n  render(state, rootEl);\r\n  fetchSession()\r\n    .then((session) => {\r\n      login(session.username);\r\n      setSpinner();\r\n      render(state, rootEl);\r\n      return fetchUserDetails();\r\n    })\r\n    .catch((err) => {\r\n      resetSpinner();\r\n      rootEl.classList.remove(\"blur\");\r\n      render(state, rootEl);\r\n      if (err?.error === SERVER.AUTH_MISSING) {\r\n        return Promise.reject({ error: CLIENT.NO_SESSION });\r\n      }\r\n      return Promise.reject(err);\r\n    })\r\n    .then((userDetails) => {\r\n      setUserDetails(userDetails);\r\n      rootEl.classList.remove(\"blur\");\r\n      render(state, rootEl);\r\n    })\r\n    .catch((err) => {\r\n      resetSpinner();\r\n      rootEl.classList.remove(\"blur\");\r\n      if (err?.error == CLIENT.NO_SESSION) {\r\n        logout();\r\n        render(state, rootEl);\r\n        return;\r\n      }\r\n      setError(err?.error || \"ERROR\");\r\n      render(state, rootEl);\r\n    });\r\n};\r\n\r\n//Polling\r\nsetInterval(() => {\r\n  if (state.isLoggedIn) {\r\n    fetchUserDetails()\r\n      .then((userDetails) => {\r\n        setUserDetails(userDetails);\r\n        updateChatWindow(state, rootEl);\r\n      })\r\n      .catch((err) => {\r\n        if( err?.error === SERVER.AUTH_MISSING ) {\r\n            logout();\r\n        }else{\r\n            setError(err?.error || 'ERROR');\r\n        }\r\n        render(state, rootEl);\r\n      });\r\n  }\r\n}, 5000);\r\n\r\nrender(state, rootEl);\r\naddListenerOnLogin(state, rootEl);\r\naddListenerOnLogout(state, rootEl);\r\naddListenerOnSend(state, rootEl);\r\ninit();\r\n"],"names":["chatView","state","concat","username","chatContainer","getInputForm","getUserList","getMessages","users","length","map","user","join","Object","keys","chats","chat","timeStamp","message","SERVER","AUTH_MISSING","AUTH_INSUFFICIENT","REQUIRED_USERNAME","INVALID_USERNAME","CLIENT","NETWORK_ERROR","NO_SESSION","MESSAGES","_defineProperty","render","updateChatWindow","setError","setSpinner","login","logout","setUserDetails","addChats","resetSpinner","fetchLogin","fetchLogout","sendMessage","fetchUserDetails","addListenerOnLogin","rootEl","addEventListener","event","target","classList","contains","querySelector","value","add","then","session","err","remove","error","Promise","reject","userDetails","addListenerOnLogout","getCurrentTimestamp","now","Date","options","year","month","day","hour","minute","toLocaleString","undefined","addListenerOnSend","focus","loginView","view","isLoggedIn","html","getSpinner","generateErrorView","innerHTML","chatContainerElement","isLoading","fetchSession","makeServiceCallWithoutHeaders","makeServiceCallWithHeaders","url","methodType","request","fetch","method","headers","body","JSON","stringify","response","ok","json","document","init","setInterval"],"sourceRoot":""}